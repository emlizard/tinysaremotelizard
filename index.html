<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tinySA Ultra ì›¹ ì»¨íŠ¸ë¡¤ëŸ¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #fff;
            min-height: 100vh;
        }

        .header {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            text-align: center;
            backdrop-filter: blur(10px);
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .status {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #f44336;
            animation: pulse 2s infinite;
        }

        .status-dot.connected {
            background: #4caf50;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .container {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 1rem;
            padding: 1rem;
            max-width: 1400px;
            margin: 0 auto;
            min-height: calc(100vh - 140px);
        }

        .panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .section {
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section h3 {
            color: #64b5f6;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #e3f2fd;
        }

        input, select, button {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 10px rgba(100, 181, 246, 0.3);
        }

        button {
            background: linear-gradient(45deg, #42a5f5, #1976d2);
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        button:hover {
            background: linear-gradient(45deg, #1976d2, #1565c0);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(25, 118, 210, 0.4);
        }

        button:disabled {
            background: rgba(255, 255, 255, 0.1);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        button.test-button {
            background: linear-gradient(45deg, #ff9800, #f57c00);
        }

        button.test-button:hover {
            background: linear-gradient(45deg, #f57c00, #ef6c00);
        }

        .display-area {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .screen-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
        }

        .device-screen {
            background: #000;
            border: 3px solid #333;
            border-radius: 10px;
            margin: 0 auto;
            position: relative;
            cursor: crosshair;
            display: inline-block;
        }

        .device-screen canvas {
            display: block;
            border-radius: 7px;
        }

        .screen-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 1.2rem;
            border-radius: 7px;
        }

        .chart-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 1.5rem;
            min-height: 350px;
            position: relative;
        }

        .chart-container canvas {
            border-radius: 8px;
            background: #1a1a1a;
            width: 100%;
            max-width: 100%;
            height: auto;
        }

        .terminal {
            background: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            padding: 1rem;
            border-radius: 8px;
            height: 200px;
            overflow-y: auto;
            font-size: 0.8rem;
            border: 1px solid #333;
        }

        .terminal-line {
            margin-bottom: 0.25rem;
        }

        .measurements {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .measurement-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .measurement-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #64b5f6;
            margin-bottom: 0.5rem;
        }

        .measurement-label {
            font-size: 0.9rem;
            color: #e3f2fd;
        }

        .controls {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .controls button {
            flex: 1;
            padding: 0.5rem;
            font-size: 0.8rem;
        }

        .debug-info {
            background: rgba(0, 100, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 0.5rem;
            margin-top: 1rem;
            font-size: 0.8rem;
            color: #00ff00;
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .measurements {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“¡ tinySA Ultra ì›¹ ì»¨íŠ¸ë¡¤ëŸ¬</h1>
        <div class="status">
            <div class="status-dot" id="statusDot"></div>
            <span id="connectionStatus">ì—°ê²° ì•ˆë¨</span>
            <select id="deviceType" style="width: auto; margin-left: 1rem;">
                <option value="tinysa-ultra">tinySA Ultra</option>
                <option value="tinysa">tinySA</option>
                <option value="nanovna">NanoVNA-H</option>
                <option value="nanovna-h4">NanoVNA-H4</option>
            </select>
        </div>
    </div>

    <div class="container">
        <!-- ì™¼ìª½ ì œì–´ íŒ¨ë„ -->
        <div class="panel">
            <!-- ì—°ê²° ìƒíƒœ -->
            <div class="section">
                <h3>ğŸ”Œ ì¥ë¹„ ì—°ê²°</h3>
                <button id="connectBtn">ì¥ë¹„ ì—°ê²°</button>
                <button id="disconnectBtn" disabled>ì—°ê²° í•´ì œ</button>
                <div style="margin-top: 1rem; font-size: 0.9rem; color: #ccc;">
                    <div>ìƒíƒœ: <span id="deviceStatus">ëŒ€ê¸° ì¤‘</span></div>
                    <div>FPS: <span id="fpsDisplay">0</span></div>
                    <div>ë°ì´í„°: <span id="dataCount">0</span> í¬ì¸íŠ¸</div>
                </div>
            </div>

            <!-- ì£¼íŒŒìˆ˜ ì„¤ì • -->
            <div class="section">
                <h3>ğŸ“¡ ì£¼íŒŒìˆ˜ ì„¤ì •</h3>
                <div class="input-group">
                    <label>ì‹œì‘ ì£¼íŒŒìˆ˜ (MHz)</label>
                    <input type="number" id="startFreq" value="100" step="1" min="0.1" max="6000">
                </div>
                <div class="input-group">
                    <label>ì¢…ë£Œ ì£¼íŒŒìˆ˜ (MHz)</label>
                    <input type="number" id="stopFreq" value="1000" step="1" min="0.1" max="6000">
                </div>
                <div class="input-group">
                    <label>ì¸¡ì • í¬ì¸íŠ¸</label>
                    <select id="points">
                        <option value="101" selected>101</option>
                        <option value="201">201</option>
                        <option value="401">401</option>
                    </select>
                </div>
                <button id="setFreqBtn">ì£¼íŒŒìˆ˜ ì„¤ì • ì ìš©</button>
            </div>

            <!-- ìŠ¤ìº” ì œì–´ -->
            <div class="section">
                <h3>ğŸ” ìŠ¤ìº” ì œì–´</h3>
                <button class="test-button" id="testDataBtn">ğŸ§ª í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±</button>
                <button id="scanBtn">ìŠ¤í™íŠ¸ëŸ¼ ìŠ¤ìº”</button>
                <button id="sweepBtn">S-parameter ì¸¡ì •</button>
                <div class="controls">
                    <button id="pauseBtn" disabled>ì¼ì‹œì •ì§€</button>
                    <button id="resumeBtn" disabled>ì¬ê°œ</button>
                </div>
            </div>

            <!-- ìº˜ë¦¬ë¸Œë ˆì´ì…˜ -->
            <div class="section">
                <h3>ğŸ¯ ìº˜ë¦¬ë¸Œë ˆì´ì…˜</h3>
                <button id="calBtn">ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì‹¤í–‰</button>
                <div class="controls">
                    <button id="saveCalBtn">ì €ì¥</button>
                    <button id="loadCalBtn">ë¡œë“œ</button>
                </div>
            </div>
        </div>

        <!-- ì¤‘ì•™ ë””ìŠ¤í”Œë ˆì´ ì˜ì—­ -->
        <div class="display-area">
            <!-- í™”ë©´ ë¯¸ëŸ¬ë§ -->
            <div class="screen-container">
                <h3 style="color: #64b5f6; margin-bottom: 1rem;">ğŸ“º ì‹¤ì‹œê°„ í™”ë©´</h3>
                <div class="device-screen" id="deviceScreen">
                    <canvas id="screenCanvas" width="480" height="320"></canvas>
                    <div class="screen-overlay" id="screenOverlay">
                        <div>ğŸ”Œ ì¥ë¹„ë¥¼ ì—°ê²°í•˜ì„¸ìš”</div>
                        <div style="font-size: 0.9rem; margin-top: 1rem; opacity: 0.7;">
                            ë˜ëŠ” "í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±" í´ë¦­
                        </div>
                    </div>
                </div>
                <div style="margin-top: 1rem; font-size: 0.9rem;">
                    í™”ë©´ì„ í´ë¦­í•˜ì—¬ ì¥ë¹„ ì¡°ì‘ | í‚¤ë³´ë“œ: +/- ì¤Œ, S ìŠ¤í¬ë¦°ìƒ·
                </div>
            </div>

            <!-- ìŠ¤í™íŠ¸ëŸ¼ ì°¨íŠ¸ -->
            <div class="chart-container">
                <h3 style="color: #64b5f6; margin-bottom: 1rem;">ğŸ“Š ìŠ¤í™íŠ¸ëŸ¼ ë¶„ì„</h3>
                <canvas id="spectrumChart" width="800" height="250"></canvas>
                <div class="debug-info">
                    <div>ìƒíƒœ: <span id="spectrumStatus">ëŒ€ê¸° ì¤‘ - í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</span></div>
                    <div>ìº”ë²„ìŠ¤: <span id="canvasInfo">-</span></div>
                    <div>ë°ì´í„° ë²”ìœ„: <span id="dataRange">-</span></div>
                </div>
            </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ì œì–´ íŒ¨ë„ -->
        <div class="panel">
            <!-- ì¸¡ì •ê°’ -->
            <div class="section">
                <h3>ğŸ“Š ì¸¡ì •ê°’</h3>
                <div class="measurements">
                    <div class="measurement-card">
                        <div class="measurement-value" id="peakFreq">-</div>
                        <div class="measurement-label">Peak ì£¼íŒŒìˆ˜</div>
                    </div>
                    <div class="measurement-card">
                        <div class="measurement-value" id="peakPower">-</div>
                        <div class="measurement-label">Peak íŒŒì›Œ</div>
                    </div>
                    <div class="measurement-card">
                        <div class="measurement-value" id="s11Value">-</div>
                        <div class="measurement-label">S11 (dB)</div>
                    </div>
                    <div class="measurement-card">
                        <div class="measurement-value" id="vswr">-</div>
                        <div class="measurement-label">VSWR</div>
                    </div>
                </div>
            </div>

            <!-- ë°ì´í„° ì €ì¥ -->
            <div class="section">
                <h3>ğŸ’¾ ë°ì´í„° ê´€ë¦¬</h3>
                <button id="saveDataBtn">ì¸¡ì • ë°ì´í„° ì €ì¥</button>
                <button id="saveImageBtn">ìŠ¤í¬ë¦°ìƒ· ì €ì¥</button>
                <button id="exportCsvBtn">CSV ë‚´ë³´ë‚´ê¸°</button>
            </div>

            <!-- ì‹œìŠ¤í…œ ì œì–´ -->
            <div class="section">
                <h3>âš™ï¸ ì‹œìŠ¤í…œ</h3>
                <button id="resetBtn">ì‹œìŠ¤í…œ ë¦¬ì…‹</button>
                <button id="vbatBtn">ë°°í„°ë¦¬ ì²´í¬</button>
                <button id="infoBtn">ì¥ë¹„ ì •ë³´</button>
            </div>

            <!-- ëª…ë ¹ì–´ -->
            <div class="section">
                <h3>ğŸ’» ëª…ë ¹ì–´</h3>
                <div class="input-group">
                    <input type="text" id="commandInput" placeholder="ëª…ë ¹ì–´ ì…ë ¥..." value="help">
                </div>
                <button id="sendCommandBtn">ëª…ë ¹ ì „ì†¡</button>
            </div>

            <!-- í†µì‹  ë¡œê·¸ -->
            <div class="section">
                <h3>ğŸ“Ÿ í†µì‹  ë¡œê·¸</h3>
                <div class="terminal" id="terminal">
                    <div class="terminal-line">tinySA Ultra ì›¹ ì»¨íŠ¸ë¡¤ëŸ¬ v1.1</div>
                    <div class="terminal-line">ê°œì„ ëœ ë²„ì „ìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.</div>
                    <div class="terminal-line">ğŸ§ª í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ë²„íŠ¼ì„ í´ë¦­í•´ë³´ì„¸ìš”!</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('=== ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì‹œì‘ ===');
        
        class TinySAController {
            constructor() {
                console.log('=== TinySAController ìƒì„±ì ì‹œì‘ ===');
                
                // ê¸°ë³¸ ì†ì„±
                this.isConnected = false;
                this.serialPort = null;
                this.deviceType = 'tinysa-ultra';
                this.zoom = 1;
                this.isCapturing = false;
                this.isPaused = false;
                this.fps = 0;
                this.frameCount = 0;
                this.lastFpsUpdate = Date.now();
                
                // WebSerial ì§€ì› í™•ì¸
                this.simulationMode = !('serial' in navigator) || window.location.protocol !== 'https:';
                
                // ì¸¡ì • ë°ì´í„° ì´ˆê¸°í™”
                this.spectrumData = {
                    frequencies: [],
                    powers: []
                };
                
                console.log('ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ:', this.simulationMode);
                
                // ì´ˆê¸°í™” ê³¼ì •
                this.initializeElements();
                this.setupEventListeners();
                this.initializeCanvases();
                
                this.logToTerminal('âœ… ì»¨íŠ¸ë¡¤ëŸ¬ ì´ˆê¸°í™” ì™„ë£Œ');
                
                if (this.simulationMode) {
                    this.logToTerminal('ğŸ® ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ í™œì„±í™”');
                    this.logToTerminal('ğŸ’¡ "ğŸ§ª í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ê·¸ë˜í”„ë¥¼ í™•ì¸í•˜ì„¸ìš”!');
                } else {
                    this.logToTerminal('ğŸ”— ì‹¤ì œ ì—°ê²° ëª¨ë“œ');
                }
                
                console.log('=== TinySAController ì´ˆê¸°í™” ì™„ë£Œ ===');
            }

            initializeElements() {
                console.log('DOM ìš”ì†Œ ì´ˆê¸°í™” ì¤‘...');
                
                this.elements = {};
                const elementIds = [
                    'statusDot', 'connectionStatus', 'deviceType', 'deviceStatus', 'fpsDisplay', 'dataCount',
                    'connectBtn', 'disconnectBtn', 'startFreq', 'stopFreq', 'points', 'setFreqBtn',
                    'scanBtn', 'sweepBtn', 'pauseBtn', 'resumeBtn', 'testDataBtn',
                    'calBtn', 'saveCalBtn', 'loadCalBtn', 'deviceScreen', 'screenOverlay', 'screenCanvas',
                    'spectrumChart', 'spectrumStatus', 'canvasInfo', 'dataRange',
                    'peakFreq', 'peakPower', 's11Value', 'vswr',
                    'saveDataBtn', 'saveImageBtn', 'exportCsvBtn',
                    'resetBtn', 'vbatBtn', 'infoBtn',
                    'commandInput', 'sendCommandBtn', 'terminal'
                ];
                
                let foundElements = 0;
                let missingElements = [];
                
                elementIds.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        this.elements[id] = element;
                        foundElements++;
                    } else {
                        missingElements.push(id);
                        console.warn(`ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ${id}`);
                    }
                });
                
                console.log(`DOM ìš”ì†Œ ì´ˆê¸°í™” ì™„ë£Œ: ${foundElements}/${elementIds.length}ê°œ ë°œê²¬`);
                if (missingElements.length > 0) {
                    console.warn('ëˆ„ë½ëœ ìš”ì†Œë“¤:', missingElements);
                }
            }

            setupEventListeners() {
                console.log('ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì¤‘...');
                
                try {
                    // í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ë²„íŠ¼ (ê°€ì¥ ì¤‘ìš”!)
                    this.elements.testDataBtn?.addEventListener('click', () => {
                        console.log('ğŸ§ª í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ë²„íŠ¼ í´ë¦­ë¨');
                        this.generateTestData();
                    });

                    // ì¥ë¹„ íƒ€ì… ë³€ê²½
                    this.elements.deviceType?.addEventListener('change', (e) => {
                        this.deviceType = e.target.value;
                        this.updateDeviceConfig();
                    });

                    // ì—°ê²° ì œì–´
                    this.elements.connectBtn?.addEventListener('click', () => this.connect());
                    this.elements.disconnectBtn?.addEventListener('click', () => this.disconnect());

                    // ì£¼íŒŒìˆ˜ ì„¤ì •
                    this.elements.setFreqBtn?.addEventListener('click', () => this.setFrequencies());

                    // ìŠ¤ìº” ì œì–´
                    this.elements.scanBtn?.addEventListener('click', () => this.startScan());
                    this.elements.sweepBtn?.addEventListener('click', () => this.startSweep());
                    this.elements.pauseBtn?.addEventListener('click', () => this.pauseCapture());
                    this.elements.resumeBtn?.addEventListener('click', () => this.resumeCapture());

                    // ìº˜ë¦¬ë¸Œë ˆì´ì…˜
                    this.elements.calBtn?.addEventListener('click', () => this.calibrate());
                    this.elements.saveCalBtn?.addEventListener('click', () => this.saveCalibration());
                    this.elements.loadCalBtn?.addEventListener('click', () => this.loadCalibration());

                    // ë°ì´í„° ê´€ë¦¬
                    this.elements.saveDataBtn?.addEventListener('click', () => this.saveData());
                    this.elements.saveImageBtn?.addEventListener('click', () => this.saveImage());
                    this.elements.exportCsvBtn?.addEventListener('click', () => this.exportCsv());

                    // ì‹œìŠ¤í…œ ì œì–´
                    this.elements.resetBtn?.addEventListener('click', () => this.systemReset());
                    this.elements.vbatBtn?.addEventListener('click', () => this.checkBattery());
                    this.elements.infoBtn?.addEventListener('click', () => this.getDeviceInfo());

                    // ëª…ë ¹ì–´
                    this.elements.sendCommandBtn?.addEventListener('click', () => this.sendCommand());
                    this.elements.commandInput?.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') this.sendCommand();
                    });

                    // í™”ë©´ í´ë¦­
                    this.elements.screenCanvas?.addEventListener('click', (e) => this.handleScreenClick(e));

                    // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
                    document.addEventListener('keydown', (e) => {
                        switch (e.key) {
                            case '+':
                                this.zoom = Math.min(this.zoom + 0.2, 3);
                                this.updateScreenSize();
                                break;
                            case '-':
                                this.zoom = Math.max(this.zoom - 0.2, 0.5);
                                this.updateScreenSize();
                                break;
                            case 's':
                            case 'S':
                                if (e.ctrlKey) return;
                                e.preventDefault();
                                this.saveImage();
                                break;
                        }
                    });

                    console.log('âœ… ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì™„ë£Œ');
                } catch (error) {
                    console.error('âŒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì‹¤íŒ¨:', error);
                }
            }

            initializeCanvases() {
                console.log('=== ìº”ë²„ìŠ¤ ì´ˆê¸°í™” ì‹œì‘ ===');
                
                try {
                    // í™”ë©´ ë¯¸ëŸ¬ë§ ìº”ë²„ìŠ¤
                    if (this.elements.screenCanvas) {
                        this.screenCtx = this.elements.screenCanvas.getContext('2d');
                        console.log('âœ… í™”ë©´ ìº”ë²„ìŠ¤ ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì™„ë£Œ');
                        this.updateDeviceConfig();
                    } else {
                        console.error('âŒ screenCanvas ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤!');
                    }

                    // ìŠ¤í™íŠ¸ëŸ¼ ì°¨íŠ¸ ìº”ë²„ìŠ¤
                    if (this.elements.spectrumChart) {
                        this.spectrumCtx = this.elements.spectrumChart.getContext('2d');
                        console.log('âœ… ìŠ¤í™íŠ¸ëŸ¼ ìº”ë²„ìŠ¤ ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì™„ë£Œ');
                        console.log('ìº”ë²„ìŠ¤ í¬ê¸°:', this.elements.spectrumChart.width, 'x', this.elements.spectrumChart.height);
                        
                        // ì´ˆê¸° ìƒíƒœ í‘œì‹œ
                        this.drawEmptyChart();
                        this.updateCanvasInfo();
                    } else {
                        console.error('âŒ spectrumChart ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤!');
                    }

                    console.log('=== ìº”ë²„ìŠ¤ ì´ˆê¸°í™” ì™„ë£Œ ===');
                } catch (error) {
                    console.error('âŒ ìº”ë²„ìŠ¤ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                }
            }

            drawEmptyChart() {
                if (!this.spectrumCtx) return;
                
                const width = this.elements.spectrumChart.width;
                const height = this.elements.spectrumChart.height;
                
                // ë°°ê²½
                this.spectrumCtx.fillStyle = '#1a1a1a';
                this.spectrumCtx.fillRect(0, 0, width, height);
                
                // ê²©ì
                this.spectrumCtx.strokeStyle = '#333';
                this.spectrumCtx.lineWidth = 1;
                
                for (let i = 0; i <= 10; i++) {
                    const x = (width * i) / 10;
                    this.spectrumCtx.beginPath();
                    this.spectrumCtx.moveTo(x, 0);
                    this.spectrumCtx.lineTo(x, height);
                    this.spectrumCtx.stroke();
                }
                
                for (let i = 0; i <= 8; i++) {
                    const y = (height * i) / 8;
                    this.spectrumCtx.beginPath();
                    this.spectrumCtx.moveTo(0, y);
                    this.spectrumCtx.lineTo(width, y);
                    this.spectrumCtx.stroke();
                }
                
                // ì•ˆë‚´ í…ìŠ¤íŠ¸
                this.spectrumCtx.fillStyle = '#888';
                this.spectrumCtx.font = 'bold 16px Arial';
                this.spectrumCtx.textAlign = 'center';
                this.spectrumCtx.fillText('ìŠ¤í™íŠ¸ëŸ¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤', width / 2, height / 2 - 10);
                this.spectrumCtx.font = '14px Arial';
                this.spectrumCtx.fillText('"ğŸ§ª í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”', width / 2, height / 2 + 15);
            }

            updateCanvasInfo() {
                if (this.elements.canvasInfo && this.elements.spectrumChart) {
                    const canvas = this.elements.spectrumChart;
                    this.elements.canvasInfo.textContent = `${canvas.width}Ã—${canvas.height}px`;
                }
            }

            generateTestData() {
                console.log('=== í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ì‹œì‘ ===');
                this.logToTerminal('ğŸ§ª í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ì‹œì‘...');
                
                // ìŠ¤í™íŠ¸ëŸ¼ ë°ì´í„° ìƒì„±
                this.generateSimulatedSpectrum();
                
                // ì°¨íŠ¸ ê·¸ë¦¬ê¸°
                this.drawSpectrumChart();
                
                // ì¸¡ì •ê°’ ì—…ë°ì´íŠ¸
                this.updateMeasurements();
                
                this.logToTerminal('âœ… í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ì™„ë£Œ!');
                console.log('=== í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ì™„ë£Œ ===');
            }

            generateSimulatedSpectrum() {
                console.log('ğŸ“Š ìŠ¤í™íŠ¸ëŸ¼ ë°ì´í„° ìƒì„± ì¤‘...');
                
                const startFreq = parseFloat(this.elements.startFreq?.value || 100) * 1e6;
                const stopFreq = parseFloat(this.elements.stopFreq?.value || 1000) * 1e6;
                const points = parseInt(this.elements.points?.value || 101);
                
                console.log(`ì„¤ì • - ì‹œì‘: ${startFreq/1e6}MHz, ì¢…ë£Œ: ${stopFreq/1e6}MHz, í¬ì¸íŠ¸: ${points}`);
                
                // ë°ì´í„° ë°°ì—´ ì´ˆê¸°í™”
                this.spectrumData.frequencies = [];
                this.spectrumData.powers = [];
                
                for (let i = 0; i < points; i++) {
                    const freq = startFreq + (stopFreq - startFreq) * i / (points - 1);
                    
                    // í˜„ì‹¤ì ì¸ ìŠ¤í™íŠ¸ëŸ¼ ì‹œë®¬ë ˆì´ì…˜
                    let power = -80; // ê¸°ë³¸ ë…¸ì´ì¦ˆ í”Œë¡œì–´
                    
                    // ì—¬ëŸ¬ í”¼í¬ ìƒì„±
                    const freqNorm = (freq - startFreq) / (stopFreq - startFreq);
                    
                    // ì²« ë²ˆì§¸ í”¼í¬ (30% ì§€ì )
                    power += 25 * Math.exp(-Math.pow((freqNorm - 0.3) * 15, 2));
                    
                    // ë‘ ë²ˆì§¸ í”¼í¬ (70% ì§€ì )
                    power += 20 * Math.exp(-Math.pow((freqNorm - 0.7) * 12, 2));
                    
                    // ì„¸ ë²ˆì§¸ ì‘ì€ í”¼í¬ (50% ì§€ì )
                    power += 10 * Math.exp(-Math.pow((freqNorm - 0.5) * 20, 2));
                    
                    // ëœë¤ ë…¸ì´ì¦ˆ
                    power += (Math.random() - 0.5) * 6;
                    
                    this.spectrumData.frequencies.push(freq);
                    this.spectrumData.powers.push(power);
                }
                
                // UI ì—…ë°ì´íŠ¸
                if (this.elements.dataCount) {
                    this.elements.dataCount.textContent = this.spectrumData.powers.length.toString();
                }
                
                const minPower = Math.min(...this.spectrumData.powers);
                const maxPower = Math.max(...this.spectrumData.powers);
                
                if (this.elements.dataRange) {
                    this.elements.dataRange.textContent = `${minPower.toFixed(1)}~${maxPower.toFixed(1)}dBm`;
                }
                
                console.log(`âœ… ë°ì´í„° ìƒì„± ì™„ë£Œ: ${points}í¬ì¸íŠ¸, ${minPower.toFixed(1)}~${maxPower.toFixed(1)}dBm`);
                this.logToTerminal(`ğŸ“Š ë°ì´í„°: ${points}í¬ì¸íŠ¸, ë²”ìœ„: ${minPower.toFixed(1)}~${maxPower.toFixed(1)}dBm`);
            }

            drawSpectrumChart() {
                console.log('=== ìŠ¤í™íŠ¸ëŸ¼ ì°¨íŠ¸ ê·¸ë¦¬ê¸° ì‹œì‘ ===');
                
                if (!this.spectrumCtx) {
                    console.error('âŒ ìŠ¤í™íŠ¸ëŸ¼ ì»¨í…ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤!');
                    return;
                }
                
                if (this.spectrumData.powers.length === 0) {
                    console.warn('âš ï¸ ë°ì´í„°ê°€ ì—†ì–´ì„œ ë¹ˆ ì°¨íŠ¸ë¥¼ ê·¸ë¦½ë‹ˆë‹¤');
                    this.drawEmptyChart();
                    return;
                }
                
                const width = this.elements.spectrumChart.width;
                const height = this.elements.spectrumChart.height;
                
                console.log(`ì°¨íŠ¸ í¬ê¸°: ${width}Ã—${height}, ë°ì´í„° í¬ì¸íŠ¸: ${this.spectrumData.powers.length}`);
                
                // ë°°ê²½ í´ë¦¬ì–´ ë° ê·¸ë¦¬ê¸°
                this.spectrumCtx.clearRect(0, 0, width, height);
                this.spectrumCtx.fillStyle = '#1a1a1a';
                this.spectrumCtx.fillRect(0, 0, width, height);
                
                // ê²©ì ê·¸ë¦¬ê¸°
                this.drawGrid(width, height);
                
                // ë°ì´í„° ë²”ìœ„ ê³„ì‚°
                const minPower = Math.min(...this.spectrumData.powers);
                const maxPower = Math.max(...this.spectrumData.powers);
                const powerRange = Math.max(maxPower - minPower, 5); // ìµœì†Œ 5dB ë²”ìœ„
                
                console.log(`íŒŒì›Œ ë²”ìœ„: ${minPower.toFixed(1)} ~ ${maxPower.toFixed(1)} dBm (ë²”ìœ„: ${powerRange.toFixed(1)}dB)`);
                
                // ìŠ¤í™íŠ¸ëŸ¼ ë¼ì¸ ê·¸ë¦¬ê¸°
                this.spectrumCtx.strokeStyle = '#00ff00';
                this.spectrumCtx.lineWidth = 2;
                this.spectrumCtx.beginPath();
                
                let validPoints = 0;
                
                for (let i = 0; i < this.spectrumData.powers.length; i++) {
                    const x = (width * i) / Math.max(this.spectrumData.powers.length - 1, 1);
                    const normalizedPower = (this.spectrumData.powers[i] - minPower) / powerRange;
                    const y = height - (normalizedPower * height * 0.85) - height * 0.1; // 10% ì—¬ë°±
                    
                    if (i === 0) {
                        this.spectrumCtx.moveTo(x, y);
                    } else {
                        this.spectrumCtx.lineTo(x, y);
                    }
                    validPoints++;
                }
                
                this.spectrumCtx.stroke();
                console.log(`âœ… ${validPoints}ê°œ í¬ì¸íŠ¸ë¡œ ë¼ì¸ ê·¸ë¦¬ê¸° ì™„ë£Œ`);
                
                // í”¼í¬ ë§ˆì»¤ ê·¸ë¦¬ê¸°
                this.drawPeakMarker(width, height, minPower, maxPower, powerRange);
                
                // ì¶• ë ˆì´ë¸” ê·¸ë¦¬ê¸°
                this.drawAxisLabels(width, height);
                
                // ìƒíƒœ ì—…ë°ì´íŠ¸
                if (this.elements.spectrumStatus) {
                    this.elements.spectrumStatus.textContent = `${this.spectrumData.powers.length}ê°œ í¬ì¸íŠ¸ í‘œì‹œë¨`;
                }
                
                console.log('=== ìŠ¤í™íŠ¸ëŸ¼ ì°¨íŠ¸ ê·¸ë¦¬ê¸° ì™„ë£Œ ===');
            }

            drawGrid(width, height) {
                this.spectrumCtx.strokeStyle = '#333';
                this.spectrumCtx.lineWidth = 1;
                
                // ìˆ˜ì§ ê²©ìì„ 
                for (let i = 0; i <= 10; i++) {
                    const x = (width * i) / 10;
                    this.spectrumCtx.beginPath();
                    this.spectrumCtx.moveTo(x, 0);
                    this.spectrumCtx.lineTo(x, height);
                    this.spectrumCtx.stroke();
                }
                
                // ìˆ˜í‰ ê²©ìì„ 
                for (let i = 0; i <= 8; i++) {
                    const y = (height * i) / 8;
                    this.spectrumCtx.beginPath();
                    this.spectrumCtx.moveTo(0, y);
                    this.spectrumCtx.lineTo(width, y);
                    this.spectrumCtx.stroke();
                }
            }

            drawPeakMarker(width, height, minPower, maxPower, powerRange) {
                // í”¼í¬ ì°¾ê¸°
                const maxIndex = this.spectrumData.powers.indexOf(maxPower);
                const peakX = (width * maxIndex) / Math.max(this.spectrumData.powers.length - 1, 1);
                const peakY = height - ((maxPower - minPower) / powerRange * height * 0.85) - height * 0.1;
                
                // í”¼í¬ ë§ˆì»¤
                this.spectrumCtx.fillStyle = '#ff6600';
                this.spectrumCtx.beginPath();
                this.spectrumCtx.arc(peakX, peakY, 4, 0, 2 * Math.PI);
                this.spectrumCtx.fill();
                
                // í”¼í¬ ë ˆì´ë¸”
                this.spectrumCtx.fillStyle = '#ffff00';
                this.spectrumCtx.font = '10px Arial';
                this.spectrumCtx.textAlign = 'center';
                this.spectrumCtx.fillText('PEAK', peakX, peakY - 8);
            }

            drawAxisLabels(width, height) {
                this.spectrumCtx.fillStyle = '#fff';
                this.spectrumCtx.font = '12px Arial';
                this.spectrumCtx.textAlign = 'right';
                this.spectrumCtx.fillText('ì£¼íŒŒìˆ˜ â†’', width - 10, height - 10);
                
                this.spectrumCtx.textAlign = 'left';
                this.spectrumCtx.fillText('â†‘', 5, 15);
                this.spectrumCtx.fillText('íŒŒì›Œ', 15, 15);
                this.spectrumCtx.fillText('(dBm)', 15, 30);
            }

            updateMeasurements() {
                console.log('ğŸ“Š ì¸¡ì •ê°’ ì—…ë°ì´íŠ¸ ì¤‘...');
                
                if (this.spectrumData.powers.length > 0) {
                    const maxIndex = this.spectrumData.powers.indexOf(Math.max(...this.spectrumData.powers));
                    const peakFreq = this.spectrumData.frequencies[maxIndex];
                    const peakPower = this.spectrumData.powers[maxIndex];
                    
                    console.log(`Peak: ${(peakFreq/1e6).toFixed(3)} MHz, ${peakPower.toFixed(1)} dBm`);
                    
                    if (this.elements.peakFreq) {
                        this.elements.peakFreq.textContent = `${(peakFreq / 1e6).toFixed(3)} MHz`;
                    }
                    if (this.elements.peakPower) {
                        this.elements.peakPower.textContent = `${peakPower.toFixed(1)} dBm`;
                    }
                    if (this.elements.s11Value) {
                        this.elements.s11Value.textContent = `${(-12 + Math.random() * 8).toFixed(1)} dB`;
                    }
                    if (this.elements.vswr) {
                        this.elements.vswr.textContent = `${(1.1 + Math.random() * 0.4).toFixed(2)}`;
                    }
                    
                    console.log('âœ… ì¸¡ì •ê°’ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
                } else {
                    console.log('âš ï¸ ë°ì´í„°ê°€ ì—†ì–´ì„œ ì¸¡ì •ê°’ì„ "-"ë¡œ ì„¤ì •');
                    if (this.elements.peakFreq) this.elements.peakFreq.textContent = '-';
                    if (this.elements.peakPower) this.elements.peakPower.textContent = '-';
                    if (this.elements.s11Value) this.elements.s11Value.textContent = '-';
                    if (this.elements.vswr) this.elements.vswr.textContent = '-';
                }
            }

            // ===== ë‚˜ë¨¸ì§€ ë©”ì„œë“œë“¤ =====

            updateDeviceConfig() {
                const configs = {
                    'tinysa-ultra': { name: 'tinySA Ultra', width: 480, height: 320, maxFreq: 5300 },
                    'tinysa': { name: 'tinySA', width: 320, height: 240, maxFreq: 350 },
                    'nanovna': { name: 'NanoVNA-H', width: 320, height: 240, maxFreq: 900 },
                    'nanovna-h4': { name: 'NanoVNA-H4', width: 480, height: 320, maxFreq: 1500 }
                };

                const config = configs[this.deviceType];
                if (config && this.elements.screenCanvas) {
                    this.elements.screenCanvas.width = config.width;
                    this.elements.screenCanvas.height = config.height;
                    this.updateScreenSize();
                    
                    this.logToTerminal(`ì¥ë¹„ ë³€ê²½: ${config.name} (${config.width}Ã—${config.height})`);
                }
            }

            updateScreenSize() {
                if (this.elements.deviceScreen) {
                    this.elements.deviceScreen.style.transform = `scale(${this.zoom})`;
                }
            }

            async connect() {
                console.log('ì—°ê²° ì‹œì‘...');
                this.updateConnectionStatus('ì—°ê²° ì¤‘...');
                this.logToTerminal('ğŸ”Œ ì¥ë¹„ ì—°ê²° ì‹œë„ ì¤‘...');

                setTimeout(() => {
                    this.isConnected = true;
                    this.updateConnectionStatus('ì‹œë®¬ë ˆì´ì…˜ ì—°ê²°');
                    this.logToTerminal('âœ… ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì—°ê²°ë¨');
                    this.startSimulation();
                }, 1000);
            }

            disconnect() {
                this.isCapturing = false;
                this.isConnected = false;
                this.updateConnectionStatus('ì—°ê²° ì•ˆë¨');
                this.logToTerminal('ğŸ”Œ ì—°ê²° í•´ì œë¨');
            }

            updateConnectionStatus(status) {
                if (this.elements.connectionStatus) {
                    this.elements.connectionStatus.textContent = status;
                }
                if (this.elements.deviceStatus) {
                    this.elements.deviceStatus.textContent = status;
                }
                if (this.elements.statusDot) {
                    this.elements.statusDot.classList.toggle('connected', this.isConnected);
                }
                if (this.elements.screenOverlay) {
                    this.elements.screenOverlay.style.display = this.isConnected ? 'none' : 'flex';
                }
                
                // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                if (this.elements.connectBtn) this.elements.connectBtn.disabled = this.isConnected;
                if (this.elements.disconnectBtn) this.elements.disconnectBtn.disabled = !this.isConnected;
            }

            startSimulation() {
                this.isCapturing = true;
                this.generateTestData(); // ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
            }

            setFrequencies() {
                const start = this.elements.startFreq?.value || 100;
                const stop = this.elements.stopFreq?.value || 1000;
                const points = this.elements.points?.value || 101;
                
                this.logToTerminal(`ğŸ“¡ ì£¼íŒŒìˆ˜ ì„¤ì •: ${start}-${stop}MHz, ${points}í¬ì¸íŠ¸`);
                
                // ìƒˆ ì„¤ì •ìœ¼ë¡œ ë°ì´í„° ì¬ìƒì„±
                this.generateTestData();
            }

            startScan() {
                this.logToTerminal('ğŸ“Š ìŠ¤í™íŠ¸ëŸ¼ ìŠ¤ìº” ì‹œì‘...');
                this.generateTestData();
            }

            startSweep() {
                this.logToTerminal('ğŸ“ˆ S-parameter ì¸¡ì • ì‹œì‘...');
                this.generateTestData();
            }

            pauseCapture() {
                this.isPaused = true;
                this.logToTerminal('â¸ï¸ ì¼ì‹œì •ì§€');
            }

            resumeCapture() {
                this.isPaused = false;
                this.logToTerminal('â–¶ï¸ ì¬ê°œ');
            }

            calibrate() {
                this.logToTerminal('ğŸ¯ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì‹¤í–‰...');
            }

            saveCalibration() {
                this.logToTerminal('ğŸ’¾ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì €ì¥...');
            }

            loadCalibration() {
                this.logToTerminal('ğŸ“‚ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ë¡œë“œ...');
            }

            saveData() {
                this.logToTerminal('ğŸ’¾ ì¸¡ì • ë°ì´í„° ì €ì¥...');
                const data = JSON.stringify(this.spectrumData, null, 2);
                this.downloadFile(data, 'spectrum_data.json', 'application/json');
            }

            saveImage() {
                this.logToTerminal('ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· ì €ì¥...');
                const canvas = this.elements.spectrumChart;
                if (canvas) {
                    canvas.toBlob((blob) => {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `spectrum_${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.png`;
                        a.click();
                        URL.revokeObjectURL(url);
                    });
                }
            }

            exportCsv() {
                this.logToTerminal('ğŸ“Š CSV ë‚´ë³´ë‚´ê¸°...');
                let csv = 'Frequency(Hz),Power(dBm)\n';
                for (let i = 0; i < this.spectrumData.frequencies.length; i++) {
                    csv += `${this.spectrumData.frequencies[i]},${this.spectrumData.powers[i]}\n`;
                }
                this.downloadFile(csv, 'spectrum_data.csv', 'text/csv');
            }

            systemReset() {
                this.logToTerminal('ğŸ”„ ì‹œìŠ¤í…œ ë¦¬ì…‹...');
                this.spectrumData = { frequencies: [], powers: [] };
                this.drawEmptyChart();
                this.updateMeasurements();
            }

            checkBattery() {
                this.logToTerminal('ğŸ”‹ ë°°í„°ë¦¬ ì²´í¬...');
                setTimeout(() => {
                    this.logToTerminal('ğŸ”‹ ë°°í„°ë¦¬: 3.8V (85%)');
                }, 500);
            }

            getDeviceInfo() {
                this.logToTerminal('â„¹ï¸ ì¥ë¹„ ì •ë³´ ì¡°íšŒ...');
                setTimeout(() => {
                    this.logToTerminal('â„¹ï¸ tinySA Ultra ì‹œë®¬ë ˆì´í„° v1.1');
                    this.logToTerminal('â„¹ï¸ ì£¼íŒŒìˆ˜ ë²”ìœ„: 100kHz - 5.3GHz');
                    this.logToTerminal('â„¹ï¸ í•´ìƒë„: 1kHz');
                }, 500);
            }

            sendCommand() {
                const command = this.elements.commandInput?.value?.trim();
                if (command) {
                    this.logToTerminal(`ğŸ’» ëª…ë ¹: ${command}`);
                    this.elements.commandInput.value = '';
                    
                    setTimeout(() => {
                        switch (command.toLowerCase()) {
                            case 'help':
                                this.logToTerminal('ğŸ“¥ ëª…ë ¹ì–´: scan, sweep, cal, info, reset, test');
                                break;
                            case 'test':
                                this.generateTestData();
                                break;
                            case 'scan':
                                this.startScan();
                                break;
                            case 'reset':
                                this.systemReset();
                                break;
                            default:
                                this.logToTerminal(`ğŸ“¥ OK - "${command}" ì‹¤í–‰ë¨`);
                        }
                    }, 300);
                }
            }

            handleScreenClick(event) {
                if (!this.isConnected) return;
                
                const rect = this.elements.screenCanvas.getBoundingClientRect();
                const x = Math.floor((event.clientX - rect.left) * (this.elements.screenCanvas.width / rect.width));
                const y = Math.floor((event.clientY - rect.top) * (this.elements.screenCanvas.height / rect.height));
                
                this.logToTerminal(`ğŸ‘† í„°ì¹˜: (${x}, ${y})`);
            }

            downloadFile(content, filename, contentType) {
                const blob = new Blob([content], { type: contentType });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);
            }

            logToTerminal(message) {
                console.log(message);
                
                if (this.elements.terminal) {
                    const timestamp = new Date().toLocaleTimeString();
                    const line = document.createElement('div');
                    line.className = 'terminal-line';
                    line.textContent = `[${timestamp}] ${message}`;
                    this.elements.terminal.appendChild(line);
                    this.elements.terminal.scrollTop = this.elements.terminal.scrollHeight;
                    
                    // ë¡œê·¸ ë¼ì¸ ìˆ˜ ì œí•œ
                    const lines = this.elements.terminal.children;
                    if (lines.length > 50) {
                        lines[0].remove();
                    }
                }
            }
        }

        // ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘
        document.addEventListener('DOMContentLoaded', () => {
            console.log('=== DOM ë¡œë“œ ì™„ë£Œ ===');
            
            try {
                window.controller = new TinySAController();
                console.log('=== ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì„±ê³µ ===');
            } catch (error) {
                console.error('=== ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹¤íŒ¨ ===', error);
            }
        });
    </script>
</body>
</html>
